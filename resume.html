<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ishwa | Portfolio</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/resume.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
</head>

<body>
    <div id="header"></div>

    <main>
        <a href="Ishwa_Rashid_Resume.pdf" download="Ishwa_Rashid_Resume.pdf" class="download-button">Download Resume</a>
        <!-- <div class="resume-container">
            <iframe src="Ishwa_Rashid_Resume.pdf" toolbar=0 width="100%" height="100%"></iframe>
        </div> -->
        <div class="resume-container">
            <canvas id="resume-canvas"></canvas>
        </div>
        <a href="Ishwa_Rashid_Resume.pdf" download="Ishwa_Rashid_Resume.pdf" class="download-button">Download Resume</a>
    </main>

    <div id="footer"></div>

    <script src="index.js"></script>
    <script>
        const url = 'Ishwa_Rashid_Resume.pdf'; 
        let pdf = null;
        let pageNum = 1;
        let scale = 1.5;
        const canvas = document.getElementById('resume-canvas');
        const context = canvas.getContext('2d');

        async function renderPDF(scale) {
            const loadingTask = pdfjsLib.getDocument(url);
            pdf = await loadingTask.promise;
            renderPage(pageNum, scale);
        }

        async function renderPage(num, scale) {
            const page = await pdf.getPage(num);
            const viewport = page.getViewport({ scale });
            canvas.width = viewport.width;
            canvas.height = viewport.height;

            const renderContext = {
                canvasContext: context,
                viewport: viewport
            };
            const renderTask = page.render(renderContext);
            await renderTask.promise;
        }

        function resizeCanvas() {
            const containerWidth = document.querySelector('.resume-container').clientWidth;
            scale = containerWidth / canvas.width;
            renderPage(pageNum, scale);
        }

        window.addEventListener('resize', resizeCanvas);

        renderPDF(scale).then(() => {
            resizeCanvas();
        });
    </script>
</body>

</html>
